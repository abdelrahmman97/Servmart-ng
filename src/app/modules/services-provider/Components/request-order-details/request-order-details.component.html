<div class="card border mb-4">
	<div class="card-header border-bottom d-md-flex justify-content-md-between align-items-center">
		<!-- Icon and Title -->
		<div class="d-flex align-items-center gap-4">
			<div class="avatar avatar-xl mb-2 mb-sm-0 ">
				<img class="avatar-img rounded-circle" [src]="request.user.profilePic" alt="" *ngIf="!isLoading">
				<div class="avatar-img rounded-circle d-flex placeholder-glow">
					<span class="avatar-img rounded-circle placeholder" alt="" *ngIf="isLoading"></span>
				</div>
			</div>
			<!-- Title -->
			<div class="ms-2">
				<h6 class="card-title mb-0">{{request.title}}</h6>
				<ul class="list-unstyled small p-0 mt-2">
					<li class="nav-item">
						<p class="fs-6 m-0">{{request.governorate.nameAr}} - {{request.city.nameAr}}</p>
					</li>
					<li class="nav-item">
						<p class="fs-6 m-0">{{request.user.fName}} {{request.user.lName}}</p>
					</li>
				</ul>
			</div>
		</div>

		<!-- Button -->
		<div class="mt-2 mt-md-0 d-flex flex-row gap-2">
			<div class="dropdown">
				<a class="btn btn-light d-flex align-items-center justify-content-between gap-3" href="#"
					id="dropdoanMenu" data-bs-toggle="dropdown" title="اعدادت" aria-haspopup="true"
					aria-expanded="false">
					إتخاذ إجراء
					<i class="fa-duotone fa-caret-down"></i>
				</a>
				<ul class="dropdown-menu" aria-labelledby="dropdoanMenu">
					<!-- Dropdown menu -->
					<li>
						<button class="dropdown-item mb-2" (click)="accept(requestId)">
							<i class="fa-duotone fa-check-double"></i>
							قبول
						</button>
					</li>
					<li>
						<button class="dropdown-item mb-2 bg-primary-soft-hover" (click)="chat(requestId)">
							<i class="fa-duotone fa-comments"></i>
							تواصل
						</button>
					</li>
					<li>
						<a class="dropdown-item mb-2 bg-primary-soft-hover" [routerLink]="['sendOffer', requestId]">
							<i class="fa-duotone fa-paper-plane"></i>
							اضافة عرض
						</a>
					</li>
					<li>
						<button class="dropdown-item mb-2 bg-danger-soft-hover" (click)="reject(requestId)">
							<i class="fa-duotone fa-trash"></i>
							رفض
						</button>
					</li>
				</ul>
			</div>
			<!-- <button type="button" class="btn btn-danger-soft mb-0">رفض</button>
			<button type="button" class="btn btn-primary-soft mb-0">قبول</button> -->
		</div>
	</div>
	<div class="card-body">
		<div class="card-body">
			<div class="row g-3 bg-light rounded p-2 m-0">
				<div class="col-md-4  d-flex flex-row gap-4 p-0 m-0">
					<span>المبلغ</span>
					<h6 class="mb-0">{{request.expectedSalary}}</h6>
				</div>
				<div class="col-md-4 d-flex flex-row gap-4 p-0 m-0">
					<span>مدة التنفيذ</span>
					<h6 class="mb-0">3 أيام</h6>
				</div>
			</div>
			<div class="mt-3">
				<p class="text-dark fs-5">
					{{request.details}}
				</p>
			</div>
		</div>
		<!-- media -->
		<div class="card-body">
			<div class="d-flex justify-center mt-3">
				<div id="carouselId" class="border carousel slide w-50" data-bs-ride="carousel">
					<ol class="carousel-indicators position-absolute top-100">
						<li data-bs-target="#carouselId" *ngFor="let item of request.requestMedia; let i = index"
							attr.data-bs-slide-to="{{i}}" [class]="i==0?'active':''" class="bg-primary"
							[attr.aria-current]="i==0?'true':''" attr.aria-label="{{i}} slide">
						</li>
					</ol>
					<div class="carousel-inner" role="listbox" title="request media">
						<div class="carousel-item" *ngFor="let media of request.requestMedia; let i = index"
							[ngClass]="i  == 0?'active':''">
							<ng-container [ngTemplateOutlet]="isVideo(media.mediaUrl) ?video_media : image_media"
								[ngTemplateOutletContext]="{url:media.mediaUrl}">
							</ng-container>
							<ng-template #video_media let-url='url'>
								<video controls>
									<source src="{{url}}" type="video/mp4">
								</video>
							</ng-template>
							<ng-template #image_media let-url='url'>
								<img src="{{url}}" class="w-100 d-block" alt="First slide">
							</ng-template>
						</div>
					</div>
					<button
						class="position-absolute top-50 start-0 translate-middle btn btn-primary-soft p-2 rounded-circle"
						type="button" data-bs-target="#carouselId" data-bs-slide="prev">
						<i class="fa-duotone fa-chevrons-left fs-3" aria-hidden="true"></i>
						<span class="visually-hidden">Previous</span>
					</button>
					<button
						class="position-absolute top-50 start-100 translate-middle btn btn-primary-soft p-2 rounded-circle"
						type="button" data-bs-target="#carouselId" data-bs-slide="next">
						<i class="fa-duotone fa-chevrons-right fs-3" aria-hidden="true"></i>
						<span class="visually-hidden">Next</span>
					</button>
				</div>
			</div>
		</div>
	</div>
</div>
